(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{1054:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(7876),s=r(9099),o=r(4232),i=r(5375),a=r(1134),d=r(1047);function c(){let{id:e}=(0,s.useRouter)().query,[t,r]=(0,o.useState)({}),[d,c]=(0,o.useState)(!1),[l,u]=(0,o.useState)({labels:["Jan","Feb","Mar","Apr","May"],datasets:[{label:"Price",data:[100,120,110,130,125],borderColor:"rgb(75, 192, 192)",tension:.1}]});(0,o.useEffect)(()=>{(async()=>{try{let t=await fetch("https://enxtai-assignment-sub.onrender.com/api/v1/products/".concat(e)),n=await t.json();r(n)}catch(e){console.error("Error fetching product:",e)}})()},[e]);let p=async(e,t)=>{try{let r=localStorage.getItem("token"),n=await fetch("https://enxtai-assignment-sub.onrender.com/api/v1/txn/buy",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({productId:e,units:t})});if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));return await n.json()}catch(e){throw e}};return(0,n.jsxs)("div",{style:{maxWidth:"800px",margin:"auto",padding:"20px"},children:[(0,n.jsx)("h2",{children:"Product Details"}),(0,n.jsxs)("p",{children:["Name: ",t.name]}),(0,n.jsxs)("p",{children:["Category: ",t.category]}),(0,n.jsxs)("p",{children:["Price: ",t.price]}),(0,n.jsxs)("p",{children:["PE Ratio: ",t.peRatio]}),(0,n.jsxs)("p",{children:["Created At: ",t.createdAt]}),(0,n.jsx)("button",{style:{backgroundColor:"green",color:"white",padding:"10px",border:"none",borderRadius:"5px"},onClick:()=>c(!0),children:"Buy"}),(0,n.jsx)(a.N1,{options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Product Price Chart"}}},data:l}),(0,n.jsx)(i.A,{product:t,isOpen:d,onClose:()=>c(!1),onBuy:p})]})}d.t1.register(d.PP,d.kc,d.FN,d.No,d.hE,d.m_,d.s$)},5375:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(7876),s=r(4232);function o(e){let{product:t,isOpen:r,onClose:o,onBuy:i}=e,[a,d]=(0,s.useState)(1),[c,l]=(0,s.useState)(null),[u,p]=(0,s.useState)(null),h=async()=>{if(a<1||a>10)return void p("Units must be between 1 and 10");try{await i(t.id,a),l({success:!0})}catch(e){l({success:!1,message:e.message})}};return r?c?(0,n.jsx)("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"20px",borderRadius:"10px",boxShadow:"0px 0px 10px rgba(0,0,0,0.2)",width:"300px",height:"200px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center"},children:c.success?(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{children:"Purchase Successful!"}),(0,n.jsx)("button",{style:{backgroundColor:"green",color:"white",padding:"10px",border:"none",borderRadius:"5px"},onClick:o,children:"Okay"})]}):(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{children:"Purchase Failed"}),(0,n.jsxs)("p",{children:["Reason: ",c.message]}),(0,n.jsx)("button",{style:{backgroundColor:"green",color:"white",padding:"10px",border:"none",borderRadius:"5px"},onClick:o,children:"Okay"})]})}):(0,n.jsxs)("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"20px",borderRadius:"10px",boxShadow:"0px 0px 10px rgba(0,0,0,0.2)",width:"300px",height:"200px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,n.jsxs)("h2",{children:["Buy ",t.name]}),(0,n.jsxs)("label",{children:["Units:",(0,n.jsx)("input",{type:"number",value:a,onChange:e=>{let t=e.target.valueAsNumber;t>=1&&t<=10?(d(t),p(null)):p("Units must be between 1 and 10")}}),u&&(0,n.jsx)("p",{style:{color:"red"},children:u})]}),(0,n.jsx)("button",{style:{backgroundColor:"green",color:"white",padding:"10px",border:"none",borderRadius:"5px"},onClick:h,children:"Proceed"}),(0,n.jsx)("button",{style:{backgroundColor:"red",color:"white",padding:"10px",border:"none",borderRadius:"5px"},onClick:o,children:"Cancel"})]}):null}},6924:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/[id]",function(){return r(1054)}])}},e=>{e.O(0,[697,255,636,593,792],()=>e(e.s=6924)),_N_E=e.O()}]);